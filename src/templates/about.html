{% extends "base.html" %}

{% block title %}About Project - Student Performance Predictor{% endblock %}

{% block content %}
<style>
    .about-header {
        background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url("{{ url_for('static', filename='images/background.png') }}") center center no-repeat;
        background-size: cover;
        padding: 4rem 0;
        color: white;
        border-radius: .3rem; /* Match Bootstrap card rounding */
    }
    .about-header h1 {
        font-weight: 300;
    }
    .project-lead {
        font-size: 1.2rem;
        font-weight: 300;
    }
    .card-custom-header {
        background-color: var(--bs-primary-bg-subtle);
        border-bottom: 1px solid var(--bs-border-color-translucent);
    }
</style>

<div class="container py-4">
    <div class="p-5 mb-4 bg-light rounded-3 shadow-sm about-header">
        <div class="container-fluid py-4 text-center">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="University Logo" style="width: 100px; margin-bottom: 20px; border-radius: 50%; background: white; padding: 5px;">
            <h1 class="display-4 fw-bold">Student Performance Predictor</h1>
            <p class="fs-5 col-md-10 mx-auto">An Educational Data Mining project to identify at-risk students using AI and Machine Learning.</p>
        </div>
    </div>

    <div class="row g-4">
        <!-- Project Overview Section -->
        <div class="col-lg-12">
            <div class="card shadow-sm border-light h-100">
                <div class="card-header card-custom-header">
                    <h4 class="mb-0 text-primary"><i class="fas fa-bullseye me-2"></i>Project Overview</h4>
                </div>
                <div class="card-body">
                    <p class="lead">
                        This Student Performance Predictor is an application developed as a final year undergraduate project. It leverages machine learning techniques to predict student academic outcomes based on a variety of personal, social, and academic factors.
                    </p>
                    <p>
                        The primary objective is to provide an early warning system for educators and institutions. By identifying students who are at a higher risk of failing their courses, timely interventions and support mechanisms can be implemented. This proactive approach aims to enhance student success rates, reduce academic attrition, and ultimately improve educational quality.
                    </p>
                    <p>
                        The system analyzes a comprehensive set of features—ranging from demographic details and family background to study habits and social interactions—to build predictive models. These models can then estimate, with a degree of statistical confidence, whether a student is likely to pass or fail, empowering educators to make data-driven decisions.
                    </p>
                </div>
            </div>
        </div>

        <!-- Machine Learning Models Section -->
        <div class="col-lg-12">
            <div class="card shadow-sm border-light h-100">
                <div class="card-header card-custom-header">
                    <h4 class="mb-0 text-primary"><i class="fas fa-cogs me-2"></i>Machine Learning Models Used</h4>
                </div>
                <div class="card-body">
                    <p>The application utilizes a suite of well-established machine learning algorithms to perform predictions. Each model offers a different approach to learning patterns from the data:</p>
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
                        {% for model_key, metrics in model_performance_metrics.items() %}
                        <div class="col">
                            <div class="card h-100 shadow-sm border-light">
                                <div class="card-body">
                                    <h5 class="card-title text-primary"><i class="fas fa-brain me-2"></i>{{ metrics.name }}</h5>
                                    <p class="card-text small text-muted">
                                        {% if metrics.name == 'Logistic Regression' %}A statistical model that uses a logistic function to model a binary dependent variable. Ideal for binary classification tasks.
                                        {% elif metrics.name == 'Random Forest Classifier' %}An ensemble learning method that constructs a multitude of decision trees at training time and outputs the class that is the mode of the classes of the individual trees.
                                        {% elif metrics.name == 'Support Vector Machine (SVM)' %}A supervised learning model that uses a separating hyperplane to classify data points. Effective in high-dimensional spaces.
                                        {% elif metrics.name == 'K-Nearest Neighbors (KNN)' %}A non-parametric lazy learning algorithm that classifies a data point based on the majority class among its k-closest neighbors.
                                        {% elif metrics.name == 'XGBoost Classifier' %}An optimized distributed gradient boosting library designed to be highly efficient, flexible, and portable. It implements machine learning algorithms under the Gradient Boosting framework.
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Dataset Section -->
        <div class="col-lg-12">
            <div class="card shadow-sm border-light h-100">
                <div class="card-header card-custom-header">
                    <h4 class="mb-0 text-primary"><i class="fas fa-database me-2"></i>Dataset Information</h4>
                </div>
                <div class="card-body">
                    <p>
                        The predictive models are trained and evaluated using the <a href="https://archive.ics.uci.edu/ml/datasets/Student+Performance" target="_blank" rel="noopener noreferrer">Student Performance Dataset</a> from the UCI Machine Learning Repository. This dataset is specifically collected from two Portuguese secondary schools and encompasses a rich array of student attributes.
                    </p>
                    <p>It includes 30 distinct features, categorized broadly as:</p>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item"><i class="fas fa-user-graduate text-primary me-2"></i><strong>Demographic Information:</strong> Such as school, sex, age, and address type (urban/rural).</li>
                        <li class="list-group-item"><i class="fas fa-users text-primary me-2"></i><strong>Family Background:</strong> Including family size, parents' cohabitation status, parents' education levels (Medu, Fedu), and parents' occupations (Mjob, Fjob), guardian, and quality of family relationships (famrel).</li>
                        <li class="list-group-item"><i class="fas fa-book-open text-primary me-2"></i><strong>School-Related Factors:</strong> Travel time to school, weekly study time, number of past class failures, extra educational support (schoolsup, famsup), paid classes, participation in extra-curricular activities, nursery school attendance, and desire for higher education.</li>
                        <li class="list-group-item"><i class="fas fa-cocktail text-primary me-2"></i><strong>Social & Lifestyle Attributes:</strong> Internet access, romantic relationships, free time after school, frequency of going out with friends, workday alcohol consumption (Dalc), weekend alcohol consumption (Walc), current health status, and number of school absences.</li>
                    </ul>
                    <p>
                        These features collectively provide a holistic view of a student's context, which is crucial for building accurate predictive models for their academic performance (pass/fail).
                    </p>
                </div>
            </div>
        </div>

        <!-- Dataset Insights Section (NEW) -->
        <div class="col-lg-12">
            <div class="card shadow-sm border-light h-100">
                <div class="card-header card-custom-header">
                    <h4 class="mb-0 text-primary"><i class="fas fa-chart-bar me-2"></i>Dataset Insights & Visualizations</h4>
                </div>
                <div class="card-body">
                    <p class="lead">
                        Visual exploration of the dataset provides valuable insights into the distribution of key features and their potential relationship with student performance.
                    </p>

                    {% if dataset_stats %}
                    <div class="row g-4">
                        <!-- Parents' Education Chart -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">Parents' Education Level</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="parentsEducationChart" height="250"></canvas>
                                </div>
                                <div class="card-footer bg-light small text-muted">
                                    Education levels: 0 - none, 1 - primary, 2 - 5th to 9th grade, 3 - secondary, 4 - higher education
                                </div>
                            </div>
                        </div>

                        <!-- Age Distribution Chart -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">Student Age Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="ageDistributionChart" height="250"></canvas>
                                </div>
                                <div class="card-footer bg-light small text-muted">
                                    Age range of students in the dataset
                                </div>
                            </div>
                        </div>

                        <!-- Alcohol Consumption Chart -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">Alcohol Consumption Patterns</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="alcoholConsumptionChart" height="250"></canvas>
                                </div>
                                <div class="card-footer bg-light small text-muted">
                                    Comparison between workday (Dalc) and weekend (Walc) alcohol consumption (1-very low to 5-very high)
                                </div>
                            </div>
                        </div>

                        <!-- Absences Distribution Chart -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">School Absences Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="absencesChart" height="250"></canvas>
                                </div>
                                <div class="card-footer bg-light small text-muted">
                                    Number of school absences grouped into ranges
                                </div>
                            </div>
                        </div>

                        <!-- Pass/Fail Distribution Chart -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">Pass/Fail Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="passFailChart" height="250"></canvas>
                                </div>
                                <div class="card-footer bg-light small text-muted">
                                    Distribution of pass/fail outcomes in the dataset
                                </div>
                            </div>
                        </div>

                        <!-- Internet Access vs. Performance -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">Internet Access vs. Performance</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="internetPerformanceChart" height="250"></canvas>
                                </div>
                                <div class="card-footer bg-light small text-muted">
                                    Relationship between internet access at home and academic performance
                                </div>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="alert alert-info">
                        <p>Dataset statistics are not currently available. Please ensure the dataset file exists and can be processed.</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Research Significance Section -->
        <div class="col-lg-12">
            <div class="card shadow-sm border-light h-100">
                <div class="card-header card-custom-header">
                    <h4 class="mb-0 text-primary"><i class="fas fa-lightbulb me-2"></i>Research Significance & Contribution</h4>
                </div>
                <div class="card-body">
                    <p>
                        This project contributes significantly to the field of Educational Data Mining (EDM). By developing a practical, web-based tool, it demonstrates the real-world applicability of machine learning in educational settings. The primary significance lies in its potential to empower educators with data-driven insights, enabling them to:
                    </p>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Identify at-risk students early in their academic journey.</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Implement targeted interventions and personalized support strategies.</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Potentially reduce course failure rates and student attrition.</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i>Enhance overall student engagement and academic success.</li>
                    </ul>
                    <p>
                        Furthermore, the comparative analysis of various machine learning models within the application provides valuable insights into which algorithms are most effective and robust for this specific educational prediction task on the given dataset. This can inform future research and development in predictive analytics in education.
                    </p>
                </div>
            </div>
        </div>

        <!-- Credits Section -->
        <div class="col-lg-12">
            <div class="card shadow-sm border-light h-100">
                <div class="card-header card-custom-header">
                    <h4 class="mb-0 text-primary"><i class="fas fa-user-shield me-2"></i>Project Credits</h4>
                </div>
                <div class="card-body text-center">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="University of Ilorin Logo" style="width: 80px; margin-bottom: 15px; border-radius:50%; background: white; padding: 3px;">
                    <h5 class="card-title">Adegbenro Afeez Adeshola</h5>
                    <p class="card-text text-muted">
                        This Student Performance Predictor was developed as a final-year project in partial fulfillment of the requirements for the award of Bachelor of Science (B.Sc.) degree in Information Technology.
                    </p>
                    <p class="card-text">
                        <strong>Department of Information Technology</strong><br>
                        Faculty of Communication and Information Sciences<br>
                        University of Ilorin, Ilorin, Nigeria.
                    </p>
                    <p class="mt-3">
                        <a href="mailto:afeez.adegbenro@example.com" class="btn btn-sm btn-outline-primary"><i class="fas fa-envelope me-2"></i>Contact Developer</a>
                        <a href="https://www.unilorin.edu.ng" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-secondary"><i class="fas fa-university me-2"></i>University Website</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-5">
        <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg"><i class="fas fa-calculator me-2"></i>Go to Predictor</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    // For the background image on the about header, ensure it is in static/images/background.jpg
    // If you don't have a specific background.jpg, the gradient will still apply.
    // Example: You might want to find a subtle educational-themed background image.

    {% if dataset_stats %}
    document.addEventListener('DOMContentLoaded', function() {
        // Common Chart.js options
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return context.dataset.label + ': ' + context.raw;
                        }
                    }
                }
            }
        };

        // Parents' Education Chart
        new Chart(document.getElementById('parentsEducationChart'), {
            type: 'bar',
            data: {
                labels: ['0', '1', '2', '3', '4'],
                datasets: [
                    {
                        label: 'Mother\'s Education',
                        data: [
                            {{ dataset_stats.medu_counts.get(0, 0) }},
                            {{ dataset_stats.medu_counts.get(1, 0) }},
                            {{ dataset_stats.medu_counts.get(2, 0) }},
                            {{ dataset_stats.medu_counts.get(3, 0) }},
                            {{ dataset_stats.medu_counts.get(4, 0) }}
                        ],
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Father\'s Education',
                        data: [
                            {{ dataset_stats.fedu_counts.get(0, 0) }},
                            {{ dataset_stats.fedu_counts.get(1, 0) }},
                            {{ dataset_stats.fedu_counts.get(2, 0) }},
                            {{ dataset_stats.fedu_counts.get(3, 0) }},
                            {{ dataset_stats.fedu_counts.get(4, 0) }}
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                ...chartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Students'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Education Level'
                        }
                    }
                }
            }
        });

        // Age Distribution Chart
        new Chart(document.getElementById('ageDistributionChart'), {
            type: 'bar',
            data: {
                labels: Object.keys({{ dataset_stats.age_counts|tojson }}),
                datasets: [{
                    label: 'Number of Students',
                    data: Object.values({{ dataset_stats.age_counts|tojson }}),
                    backgroundColor: 'rgba(75, 192, 192, 0.7)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                ...chartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Students'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Age'
                        }
                    }
                }
            }
        });

        // Alcohol Consumption Chart
        new Chart(document.getElementById('alcoholConsumptionChart'), {
            type: 'bar',
            data: {
                labels: ['1', '2', '3', '4', '5'],
                datasets: [
                    {
                        label: 'Workday Alcohol',
                        data: [
                            {{ dataset_stats.dalc_counts.get(1, 0) }},
                            {{ dataset_stats.dalc_counts.get(2, 0) }},
                            {{ dataset_stats.dalc_counts.get(3, 0) }},
                            {{ dataset_stats.dalc_counts.get(4, 0) }},
                            {{ dataset_stats.dalc_counts.get(5, 0) }}
                        ],
                        backgroundColor: 'rgba(153, 102, 255, 0.7)',
                        borderColor: 'rgba(153, 102, 255, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Weekend Alcohol',
                        data: [
                            {{ dataset_stats.walc_counts.get(1, 0) }},
                            {{ dataset_stats.walc_counts.get(2, 0) }},
                            {{ dataset_stats.walc_counts.get(3, 0) }},
                            {{ dataset_stats.walc_counts.get(4, 0) }},
                            {{ dataset_stats.walc_counts.get(5, 0) }}
                        ],
                        backgroundColor: 'rgba(255, 159, 64, 0.7)',
                        borderColor: 'rgba(255, 159, 64, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                ...chartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Students'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Consumption Level (1-Very Low to 5-Very High)'
                        }
                    }
                }
            }
        });

        // Absences Distribution Chart
        new Chart(document.getElementById('absencesChart'), {
            type: 'bar',
            data: {
                labels: Object.keys({{ dataset_stats.absences_counts|tojson }}),
                datasets: [{
                    label: 'Number of Students',
                    data: Object.values({{ dataset_stats.absences_counts|tojson }}),
                    backgroundColor: 'rgba(255, 206, 86, 0.7)',
                    borderColor: 'rgba(255, 206, 86, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                ...chartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Students'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Number of Absences'
                        }
                    }
                }
            }
        });

        // Pass/Fail Chart
        new Chart(document.getElementById('passFailChart'), {
            type: 'pie',
            data: {
                labels: ['Pass', 'Fail'],
                datasets: [{
                    data: [
                        {{ dataset_stats.pass_fail_counts.get('yes', 0) }},
                        {{ dataset_stats.pass_fail_counts.get('no', 0) }}
                    ],
                    backgroundColor: [
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(255, 99, 132, 0.7)'
                    ],
                    borderColor: [
                        'rgba(75, 192, 192, 1)',
                        'rgba(255, 99, 132, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                }
            }
        });

        // Internet Access vs. Performance Chart
        new Chart(document.getElementById('internetPerformanceChart'), {
            type: 'bar',
            data: {
                labels: ['With Internet', 'Without Internet'],
                datasets: [
                    {
                        label: 'Pass',
                        data: [
                            {{ dataset_stats.internet_yes_pass }},
                            {{ dataset_stats.internet_no_pass }}
                        ],
                        backgroundColor: 'rgba(75, 192, 192, 0.7)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Fail',
                        data: [
                            {{ dataset_stats.internet_yes_fail }},
                            {{ dataset_stats.internet_no_fail }}
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                ...chartOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Students'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Internet Access at Home'
                        }
                    }
                }
            }
        });
    });
    {% endif %}
</script>
{% endblock %}
